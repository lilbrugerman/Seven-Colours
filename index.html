<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Mini E-Store ‚Äî Versi Power</title>
<style>
  :root{
    --primary:#e63946;
    --bg:#f5f7fb;
    --card:#ffffff;
    --text:#222;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:Inter, system-ui, Arial, sans-serif;
    background:var(--bg);
    color:var(--text);
  }

  /* NAV */
  header{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
    padding:12px 20px;
    background:linear-gradient(180deg, rgba(0,0,0,0.02), transparent);
    position:sticky;
    top:0;
    z-index:40;
  }
  .brand{font-weight:700;font-size:18px}
  .controls{display:flex;gap:8px;align-items:center}

  /* HERO */
  .hero{
    width:100%;
    height:420px;
    background-image:url('https://via.placeholder.com/1600x600');
    background-size:cover;
    background-position:center;
    display:flex;
    align-items:center;
    justify-content:center;
    color:white;
    text-shadow:0 6px 18px rgba(0,0,0,0.45);
    position:relative;
  }
  .hero-overlay{
    background:linear-gradient(0deg, rgba(0,0,0,0.45), rgba(0,0,0,0.15));
    position:absolute;inset:0;
  }
  .hero-content{
    position:relative;
    z-index:2;
    text-align:center;
  }
  .hero h1{font-size:40px;margin:0 10px}
  .hero p{margin:8px 0 0}

  /* Container */
  .container{max-width:1100px;margin:20px auto;padding:0 16px}

  /* Tools: color picker & upload */
  .tool-row{display:flex;gap:12px;flex-wrap:wrap;align-items:center;margin:12px 0}
  .tool {background:var(--card);padding:8px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.04)}

  /* GRID */
  .products{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px}
  .product{
    background:var(--card);
    border-radius:12px;
    padding:12px;
    box-shadow:0 6px 18px rgba(14,20,31,0.04);
    display:flex;flex-direction:column;gap:8px;
  }
  .product img{width:100%;height:160px;object-fit:cover;border-radius:8px}
  .price{font-weight:700}
  .prod-actions{margin-top:auto;display:flex;gap:8px;align-items:center}
  .qty{width:64px;padding:6px;border-radius:8px;border:1px solid #e6e9ee;text-align:center}

  /* CART */
  .cart-btn{
    position:fixed;right:18px;bottom:18px;background:var(--primary);color:white;padding:12px 14px;border-radius:999px;box-shadow:0 8px 30px rgba(0,0,0,0.18);cursor:pointer;z-index:80;
  }
  #cartPanel{
    position:fixed;right:-420px;top:0;width:380px;height:100vh;background:var(--card);box-shadow:-12px 0 40px rgba(0,0,0,0.12);padding:18px;transition:right .36s cubic-bezier(.2,.9,.2,1);z-index:90;overflow:auto;
  }
  #cartPanel.open{right:0}
  .cart-item{display:flex;gap:10px;align-items:center;padding:8px 0;border-bottom:1px dashed #eee}
  .cart-item img{width:64px;height:64px;object-fit:cover;border-radius:8px}
  .cart-meta{flex:1}
  .small{font-size:13px;color:#666}
  .cart-actions{display:flex;gap:8px;align-items:center}

  /* Checkout box inside panel */
  .checkout-form{display:flex;flex-direction:column;gap:8px;margin-top:12px}
  .input, textarea{padding:8px;border-radius:8px;border:1px solid #e6e9ee}
  button.btn{
    background:var(--primary);color:white;border:none;padding:10px;border-radius:10px;cursor:pointer;font-weight:600
  }
  button.ghost{background:transparent;border:1px solid #ddd;color:var(--text)}

  footer{padding:24px;text-align:center;color:#666;font-size:14px;margin-top:28px}

  /* responsive */
  @media (max-width:600px){
    .hero{height:260px}
    .hero h1{font-size:26px}
    #cartPanel{width:100%;right:-100%}
  }
</style>
</head>
<body>

<header>
  <div class="brand">Mini E-Store</div>
  <div class="controls">
    <div class="tool">
      <label style="font-size:13px;color:#555">Warna utama</label><br>
      <input id="colorPrimary" type="color" value="#e63946">
    </div>

    <div class="tool">
      <label style="font-size:13px;color:#555">Ganti hero</label><br>
      <input id="heroUpload" type="file" accept="image/*">
    </div>

    <div class="tool" style="display:flex;align-items:center;gap:8px">
      <span class="small">Items:</span><strong id="cartCount">0</strong>
    </div>
  </div>
</header>

<!-- HERO -->
<section class="hero" id="heroSection" role="banner" aria-label="Hero">
  <div class="hero-overlay"></div>
  <div class="hero-content">
    <h1 id="heroTitle">HUGE SAVINGS ON SHOES</h1>
    <p id="heroSubtitle">Free shipping for orders over $50 ‚Ä¢ Limited time</p>
    <div style="margin-top:12px">
      <button class="btn" onclick="scrollToProducts()">Shop Now</button>
    </div>
  </div>
</section>

<div class="container">
  <div style="display:flex;align-items:center;justify-content:space-between;gap:12px">
    <h2>Etalase Produk</h2>
    <div class="small">Responsive ‚Ä¢ Editable via Notepad</div>
  </div>

  <!-- PRODUCT GRID -->
  <div class="products" id="productsGrid">
    <!-- Produk akan di-render lewat JS -->
  </div>
</div>

<!-- CART BUTTON -->
<div class="cart-btn" onclick="toggleCart()">üõí <span id="cartBtnText">Cart</span></div>

<!-- CART PANEL -->
<aside id="cartPanel" aria-hidden="true">
  <div style="display:flex;align-items:center;justify-content:space-between">
    <h3>Keranjang Kamu</h3>
    <button class="ghost" onclick="toggleCart()">Close</button>
  </div>

  <div id="cartItemsList" style="margin-top:12px"></div>

  <div style="margin-top:12px;border-top:1px solid #f0f0f0;padding-top:12px">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <div class="small">Subtotal</div>
      <div style="font-weight:700" id="cartTotal">$0.00</div>
    </div>

    <div class="checkout-form">
      <h4 style="margin:6px 0 0">Checkout</h4>
      <input id="cname" class="input" placeholder="Nama lengkap" />
      <input id="cemail" class="input" placeholder="Email" type="email" />
      <textarea id="caddress" class="input" placeholder="Alamat pengiriman" rows="2"></textarea>

      <div style="display:flex;gap:8px">
        <button class="btn" onclick="placeOrder()">Place Order</button>
        <button class="ghost" onclick="clearCart()">Clear</button>
      </div>
      <div id="msg" class="small" style="color:green"></div>
    </div>
  </div>
</aside>

<footer>
  Made with ‚ù§Ô∏è ‚Äî copy dan edit di Notepad. Ingin fitur lain? bilang saja.
</footer>

<script>
/* ====== Sample product data (edit langsung di Notepad) ====== */
const productsData = [
  {id:1,title:"Sneaker Classic",price:29.99,image:"https://images.unsplash.com/photo-1519744792095-2f2205e87b6f?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=8d7d9b2da5e0c3b6c28e9dc4a5b2c8b0"},
  {id:2,title:"Casual Loafers",price:39.99,image:"https://images.unsplash.com/photo-1600180758890-9b3f1b35b3e1?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=3f1f8f0f5f3c0a4c1b2a5b6f7c8d9e0a"},
  {id:3,title:"Sport Runner",price:19.99,image:"https://images.unsplash.com/photo-1542291026-7eec264c27ff?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=9e1a0b2c3d4f5a6b7c8d9e0f1a2b3c4d"},
  {id:4,title:"Elegant Heels",price:49.99,image:"https://images.unsplash.com/photo-1503342452485-86f7b4e1b47b?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d"},
  {id:5,title:"Leather Boots",price:24.99,image:"https://images.unsplash.com/photo-1542290916-3b5d9f5b23fa?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=8a7b6c5d4e3f2a1b0c9d8e7f6a5b4c3d"},
  {id:6,title:"Sandals Summer",price:59.99,image:"https://images.unsplash.com/photo-1504215680853-026ed2a45def?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=abcdef1234567890abcdef1234567890"}
];

/* ====== Utilities and state ====== */
let cart = JSON.parse(localStorage.getItem('mini_cart_v1')||'[]');

function saveCart(){ localStorage.setItem('mini_cart_v1', JSON.stringify(cart)); updateCartUI(); }

function formatPrice(v){ return '$' + Number(v).toFixed(2); }

/* ====== Render products ====== */
function renderProducts(){
  const grid = document.getElementById('productsGrid');
  grid.innerHTML = '';
  productsData.forEach(p => {
    const el = document.createElement('div');
    el.className = 'product';
    el.innerHTML = `
      <img src="${p.image}" alt="${escapeHtml(p.title)}" />
      <h3 style="margin:4px 0 0">${escapeHtml(p.title)}</h3>
      <div class="price">${formatPrice(p.price)}</div>
      <div style="display:flex;gap:8px;align-items:center" class="prod-actions">
        <input type="number" min="1" value="1" class="qty" id="qty-${p.id}">
        <button class="btn" onclick="addToCart(${p.id})">Add to Cart</button>
      </div>
    `;
    grid.appendChild(el);
  });
}

/* ====== Cart functions ====== */
function addToCart(pid){
  const product = productsData.find(x=>x.id===pid);
  if(!product) return;
  const qtyInput = document.getElementById('qty-'+pid);
  let qty = 1;
  if(qtyInput) qty = Math.max(1, parseInt(qtyInput.value)||1);

  // if same product exists, increase qty
  const existing = cart.find(i=>i.id===pid);
  if(existing){
    existing.qty += qty;
  } else {
    cart.push({id:pid,title:product.title,price:product.price,qty:qty,image:product.image});
  }
  saveCart();
  showTempMessage(`${product.title} ditambahkan (${qty})`);
}

function updateCartUI(){
  const list = document.getElementById('cartItemsList');
  list.innerHTML = '';
  let total = 0;
  cart.forEach(item=>{
    total += item.price * item.qty;
    const node = document.createElement('div');
    node.className = 'cart-item';
    node.innerHTML = `
      <img src="${item.image}" alt="${escapeHtml(item.title)}" />
      <div class="cart-meta">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <strong>${escapeHtml(item.title)}</strong>
          <div class="small">${formatPrice(item.price)}</div>
        </div>
        <div style="display:flex;gap:8px;align-items:center;margin-top:6px">
          <input type="number" class="qty" value="${item.qty}" min="1" style="width:70px" onchange="changeQty(${item.id}, this.value)" />
          <button class="ghost" style="padding:6px;border-radius:8px" onclick="removeItem(${item.id})">Remove</button>
        </div>
      </div>
    `;
    list.appendChild(node);
  });
  document.getElementById('cartTotal').textContent = formatPrice(total);
  document.getElementById('cartCount').textContent = cart.reduce((s,i)=>s+i.qty,0);
  document.getElementById('cartBtnText').textContent = `Cart (${cart.reduce((s,i)=>s+i.qty,0)})`;
}

function changeQty(id, val){
  const q = Math.max(1, parseInt(val)||1);
  const it = cart.find(x=>x.id===id);
  if(it){ it.qty = q; saveCart(); }
}

function removeItem(id){
  cart = cart.filter(x=>x.id!==id);
  saveCart();
}

function clearCart(){
  if(!confirm('Yakin ingin kosongkan keranjang?')) return;
  cart = []; saveCart();
  showTempMessage('Keranjang dikosongkan');
}

/* ====== Cart panel toggle ====== */
function toggleCart(){
  const panel = document.getElementById('cartPanel');
  const open = panel.classList.toggle('open');
  panel.setAttribute('aria-hidden', String(!open));
  updateCartUI();
}

/* ====== Checkout ====== */
function placeOrder(){
  const name = document.getElementById('cname').value.trim();
  const email = document.getElementById('cemail').value.trim();
  const address = document.getElementById('caddress').value.trim();

  if(cart.length===0){ alert('Keranjang kosong. Tambahkan produk dulu.'); return; }
  if(!name || !email || !address){ alert('Lengkapi data checkout (nama, email, alamat).'); return; }

  // Simulasikan order
  const order = {
    id: 'ORD' + Date.now(),
    name, email, address,
    items: cart,
    total: cart.reduce((s,i)=>s+i.price*i.qty,0)
  };

  // Simpan sementara di localStorage (sebagai history)
  const history = JSON.parse(localStorage.getItem('mini_orders_v1')||'[]');
  history.push(order);
  localStorage.setItem('mini_orders_v1', JSON.stringify(history));

  // reset cart
  cart = []; saveCart();
  document.getElementById('msg').textContent = `Order berhasil! ID: ${order.id}`;
  setTimeout(()=>{ document.getElementById('msg').textContent = ''; }, 7000);
}

/* ====== Hero upload and color picker ====== */
const heroInput = document.getElementById('heroUpload');
heroInput.addEventListener('change', e=>{
  const f = e.target.files && e.target.files[0];
  if(!f) return;
  const reader = new FileReader();
  reader.onload = function(ev){
    document.getElementById('heroSection').style.backgroundImage = `url('${ev.target.result}')`;
  };
  reader.readAsDataURL(f);
});

const colorPicker = document.getElementById('colorPrimary');
colorPicker.addEventListener('input', e=>{
  document.documentElement.style.setProperty('--primary', e.target.value);
});

/* ====== helpers ====== */
function scrollToProducts(){ document.getElementById('productsGrid').scrollIntoView({behavior:'smooth',block:'start'}); }
function showTempMessage(txt){
  const el = document.createElement('div');
  el.textContent = txt;
  Object.assign(el.style,{position:'fixed',left:'50%',transform:'translateX(-50%)',bottom:'100px',background:'rgba(0,0,0,0.8)',color:'white',padding:'10px 14px',borderRadius:'8px',zIndex:999});
  document.body.appendChild(el);
  setTimeout(()=>el.style.opacity=0,1600);
  setTimeout(()=>el.remove(),2200);
}
function escapeHtml(str){ return String(str).replace(/[&<>"']/g, function(m){ return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]; }); }

/* ====== Init ====== */
renderProducts();
updateCartUI();

/* load saved hero if exists (not required, kept simple) */
</script>
</body>
</html>
