<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Mini E-Store ‚Äî Sidebar Slide + Side Cart + Sort</title>
<style>
  :root{
    --primary:#ff6b00;
    --bg:#f7f8fb;
    --card:#ffffff;
    --text:#111827;
    --muted:#6b7280;
    --max-width:1150px;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:Inter, system-ui, Arial, sans-serif;background:var(--bg);color:var(--text);-webkit-font-smoothing:antialiased}
  header{display:flex;align-items:center;justify-content:space-between;padding:12px 18px;background:linear-gradient(180deg,rgba(0,0,0,0.02),transparent);position:sticky;top:0;z-index:70}
  .brand{display:flex;gap:12px;align-items:center}
  .burger{width:44px;height:44px;border-radius:10px;display:flex;align-items:center;justify-content:center;background:var(--card);box-shadow:0 4px 14px rgba(15,23,42,0.06);cursor:pointer}
  .brand-name{font-weight:700;font-size:18px}
  .top-controls{display:flex;gap:10px;align-items:center}

  /* search + sort */
  .search-wrap{display:flex;gap:10px;align-items:center}
  .search-input{padding:10px 12px;border-radius:10px;border:1px solid #e6e9ee;width:240px}
  .sort-select{padding:10px;border-radius:10px;border:1px solid #e6e9ee}

  /* layout */
  .main {max-width:var(--max-width);margin:18px auto;padding:0 16px;display:grid;grid-template-columns: 1fr;gap:18px}
  .hero{width:100%;height:260px;background-image:url('banner.jpg');background-size:cover;background-position:center;border-radius:12px;display:flex;align-items:center;justify-content:center;color:white;text-shadow:0 6px 20px rgba(0,0,0,0.35);font-weight:700;font-size:28px}
  .content{display:flex;gap:18px}

  /* products grid */
  .products {display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px;width:100%}
  .product {background:var(--card);padding:12px;border-radius:12px;box-shadow:0 6px 18px rgba(14,20,31,0.04);display:flex;flex-direction:column;gap:10px;position:relative;overflow:hidden}
  .badge{position:absolute;left:12px;top:12px;background:var(--primary);color:white;padding:6px 8px;border-radius:999px;font-size:12px}
  .product img{width:100%;max-width:500px;height:500px;object-fit:cover;border-radius:12px;display:block;margin:0 auto;background:#f0f0f0}
  .prod-title{font-size:16px;font-weight:600;margin:0}
  .prod-desc{font-size:13px;color:var(--muted);margin:0}
  .prod-row{display:flex;justify-content:space-between;align-items:center;gap:8px}
  .price{font-weight:700}
  .actions{display:flex;gap:8px;align-items:center}
  .btn{background:var(--primary);color:white;padding:9px 12px;border-radius:10px;border:0;cursor:pointer;font-weight:600}
  .ghost{background:transparent;border:1px solid #e6e9ee;padding:9px 12px;border-radius:10px;cursor:pointer}

  /* sidebar slide (hidden by default, slide from left) */
  #sidebar{
    position:fixed;left:-320px;top:0;width:320px;height:100vh;background:var(--card);box-shadow:8px 0 40px rgba(0,0,0,0.12);z-index:100;transition:left .34s cubic-bezier(.2,.9,.2,1);
    padding:18px;display:flex;flex-direction:column;gap:12px;
  }
  #sidebar.open{left:0}
  .sidebar-close{align-self:flex-end;background:transparent;border:0;font-size:18px;cursor:pointer}
  .sidebar h3{margin:0 0 6px 0}
  .cat-list{display:flex;flex-direction:column;gap:8px}
  .cat-item{padding:10px;border-radius:8px;cursor:pointer;border:1px solid transparent}
  .cat-item.active{background:#f3f4f6;border-color:#e6e9ee}

  /* side cart (slide from right) */
  #sideCart{
    position:fixed;right:-420px;top:0;width:400px;height:100vh;background:var(--card);box-shadow:-12px 0 40px rgba(0,0,0,0.12);z-index:110;transition:right .34s cubic-bezier(.2,.9,.2,1);padding:16px;overflow:auto;
  }
  #sideCart.open{ right:0 }
  .cart-head{display:flex;justify-content:space-between;align-items:center;gap:8px }
  .cart-items{margin-top:12px;display:flex;flex-direction:column;gap:10px}
  .cart-item{display:flex;gap:10px;align-items:center;padding:8px;border-radius:8px;border:1px solid #f0f0f0}
  .cart-item img{width:72px;height:72px;object-fit:cover;border-radius:8px}
  .cart-meta{flex:1}
  .cart-controls{display:flex;gap:8px;align-items:center;margin-top:6px}
  .qty-input{width:64px;padding:6px;border-radius:8px;border:1px solid #e6e9ee;text-align:center}

  /* floating cart button */
  .cart-btn{position:fixed;right:18px;bottom:18px;background:var(--primary);color:white;padding:12px 14px;border-radius:999px;box-shadow:0 10px 30px rgba(0,0,0,0.18);cursor:pointer;z-index:90}

  /* toast */
  .toast{position:fixed;left:50%;transform:translateX(-50%);bottom:110px;background:rgba(0,0,0,0.8);color:white;padding:10px 14px;border-radius:8px;z-index:999;opacity:0;transition:opacity .2s}
  .toast.show{opacity:1}

  footer{text-align:center;color:var(--muted);padding:28px 12px}

  @media (max-width:900px){
    .product img{height:380px}
    #sidebar{width:100%;left:-100%}
    #sidebar.open{left:0}
    #sideCart{width:100%;right:-100%}
    #sideCart.open{right:0}
    .search-input{width:140px}
  }
</style>
</head>
<body>

<header>
  <div class="brand">
    <div class="burger" onclick="toggleSidebar()" title="Menu">
      <svg width="20" height="14" viewBox="0 0 20 14" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect width="20" height="2" rx="1" fill="#111827"></rect>
        <rect y="6" width="14" height="2" rx="1" fill="#111827"></rect>
        <rect y="12" width="8" height="2" rx="1" fill="#111827"></rect>
      </svg>
    </div>
    <div>
      <div class="brand-name">Mini E-Store</div>
      <div style="font-size:12px;color:var(--muted)">Belanja aman & gampang</div>
    </div>
  </div>

  <div class="top-controls">
    <div class="search-wrap">
      <input id="searchInput" class="search-input" placeholder="Cari produk..." aria-label="Cari produk">
      <select id="sortSelect" class="sort-select" aria-label="Sort produk">
        <option value="recommended">Sort: Recommended</option>
        <option value="price-asc">Harga: Termurah</option>
        <option value="price-desc">Harga: Termahal</option>
        <option value="name-asc">Nama A ‚Üí Z</option>
        <option value="name-desc">Nama Z ‚Üí A</option>
      </select>
    </div>

    <button class="ghost" onclick="openSideCart()" title="Buka Keranjang">üõí <span id="cartCountTop">0</span></button>
  </div>
</header>

<!-- SIDEBAR (slide B: hidden until toggle) -->
<aside id="sidebar" aria-hidden="true">
  <button class="sidebar-close" onclick="toggleSidebar()">‚úï</button>
  <h3>Kategori</h3>
  <div class="cat-list" id="catList">
    <!-- categories rendered by JS -->
  </div>

  <hr style="border:none;border-top:1px dashed #eee">
  <h4>Info</h4>
  <p class="small" style="color:var(--muted);font-size:13px">Edit produk, harga, dan gambar melalui kode (Notepad). Tidak ada kontrol upload di web ini.</p>
</aside>

<!-- SIDE CART (slide from right) -->
<aside id="sideCart" aria-hidden="true">
  <div class="cart-head">
    <div>
      <h3 style="margin:0">Keranjang</h3>
      <div class="small" style="color:var(--muted)"><span id="cartItemsCount">0</span> item</div>
    </div>
    <div style="display:flex;gap:8px;align-items:center">
      <button class="ghost" onclick="clearCart()">Clear</button>
      <button class="ghost" onclick="closeSideCart()">Close</button>
    </div>
  </div>

  <div class="cart-items" id="cartItemsList"></div>

  <div style="margin-top:14px;border-top:1px solid #f0f0f0;padding-top:12px">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <div class="small">Subtotal</div>
      <div style="font-weight:700" id="cartTotal">$0.00</div>
    </div>
    <div style="margin-top:12px;display:flex;gap:8px">
      <button class="btn" onclick="placeOrder()">Checkout</button>
      <button class="ghost" onclick="closeSideCart()">Continue Shopping</button>
    </div>
    <div id="orderMsg" style="margin-top:8px;color:green;font-size:13px"></div>
  </div>
</aside>

<main class="main">
  <div class="hero">Promo Hari Ini ‚Äî Diskon Spesial</div>

  <section class="content">
    <div style="flex:1">
      <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:8px">
        <h2 style="margin:0">Etalase Produk</h2>
        <div style="font-size:13px;color:var(--muted)">Edit lewat kode ‚Üí buka file HTML</div>
      </div>

      <div id="productsGrid" class="products" aria-live="polite">
        <!-- produk dirender lewat JS -->
      </div>
    </div>
  </section>
</main>

<!-- floating cart button -->
<button class="cart-btn" onclick="openSideCart()">üõí <span id="cartCountFloat">0</span></button>

<div id="toast" class="toast" role="status" aria-live="polite"></div>

<footer>Made with ‚ù§Ô∏è ‚Äî Tata's Shop. Edit product list in code.</footer>

<script>
/* ===========================
   PRODUCTS DATA (edit di sini)
   - Untuk gambar: gunakan versi HD 1000√ó1000 atau 1200√ó1200
   - Display akan pakai 500√ó500 (object-fit: cover)
   - Tambah produk cukup push object baru ke array
   =========================== */
const productsData = [
  {id:1, title:"Sneaker Classic", price:29.99, category:"shoes", image:"produk1.jpg", desc:"Comfortable everyday sneakers.", badge:"NEW"},
  {id:2, title:"Casual Loafers", price:39.99, category:"shoes", image:"produk2.jpg", desc:"Smart-casual loafers for work or outings.", badge:null},
  {id:3, title:"Sport Runner", price:19.99, category:"shoes", image:"produk3.jpg", desc:"Lightweight running shoes.", badge:"SALE"},
  {id:4, title:"Tas Rajut Handmade", price:75.00, category:"accessories", image:"produk4.jpg", desc:"Handmade bag, unique design.", badge:null},
  {id:5, title:"Keripik Pisang", price:12.00, category:"food", image:"produk5.jpg", desc:"Crispy banana chips.", badge:null},
  {id:6, title:"Es Teh Manis", price:5.00, category:"drinks", image:"produk6.jpg", desc:"Refreshing iced tea.", badge:null}
];
// NOTE: untuk tambah produk cukup copy object di atas dan ubah id/title/price/image/desc/category

/* ========== STATE ========== */
let cart = JSON.parse(localStorage.getItem('mini_cart_final')||'[]');
let categories = [...new Set(productsData.map(p=>p.category))];

/* ========== UTIL ========== */
function formatPrice(v){ return '$' + Number(v).toFixed(2); } // untuk tampilan dolar, tapi kamu pakai harga IDR di HTML jika mau
function showToast(msg){
  const t = document.getElementById('toast');
  t.textContent = msg; t.classList.add('show');
  setTimeout(()=>t.classList.remove('show'),2200);
}

/* ========== SIDEBAR ========== */
function toggleSidebar(){
  const s = document.getElementById('sidebar');
  const open = s.classList.toggle('open');
  s.setAttribute('aria-hidden', String(!open));
}

/* ========== PRODUCTS RENDER & FILTER & SORT ========= */
function renderCategories(){
  const ct = document.getElementById('catList');
  ct.innerHTML = '';
  const allEl = document.createElement('div');
  allEl.className='cat-item active';
  allEl.textContent='Semua Kategori';
  allEl.dataset.cat='all';
  allEl.onclick = ()=>{ selectCategory('all'); };
  ct.appendChild(allEl);

  categories.forEach(c=>{
    const el = document.createElement('div');
    el.className='cat-item';
    el.textContent = c.charAt(0).toUpperCase() + c.slice(1);
    el.dataset.cat = c;
    el.onclick = ()=>{ selectCategory(c); };
    ct.appendChild(el);
  });
  // default active
  document.querySelectorAll('.cat-item').forEach(x=>x.classList.remove('active'));
  document.querySelector('.cat-item[data-cat="all"]').classList.add('active');
}

let currentCategory = 'all';
function selectCategory(cat){
  currentCategory = cat;
  document.querySelectorAll('.cat-item').forEach(x=>x.classList.toggle('active', x.dataset.cat===cat));
  applyFilters();
  toggleSidebar(); // auto close sidebar for UX
}

function renderProducts(list){
  const grid = document.getElementById('productsGrid');
  grid.innerHTML = '';
  list.forEach(p=>{
    const el = document.createElement('div');
    el.className = 'product';
    el.innerHTML = `
      ${p.badge ? `<div class="badge">${escapeHtml(p.badge)}</div>` : ''}
      <img src="${p.image}" alt="${escapeHtml(p.title)}" onclick="openProduct(${p.id})" />
      <h3 class="prod-title">${escapeHtml(p.title)}</h3>
      <p class="prod-desc">${escapeHtml(p.desc)}</p>
      <div class="prod-row">
        <div class="price">${formatPrice(p.price)}</div>
        <div class="actions">
          <input type="number" id="qty-inline-${p.id}" value="1" min="1" class="qty-input" style="width:64px;padding:6px;border-radius:8px;border:1px solid #e6e9ee" />
          <button class="btn" onclick="addToCart(${p.id})">Add</button>
        </div>
      </div>
    `;
    grid.appendChild(el);
  });
}

/* search + sort + category combined */
function applyFilters(){
  const q = (document.getElementById('searchInput').value || '').trim().toLowerCase();
  const sortBy = document.getElementById('sortSelect').value;
  let items = productsData.slice();

  // category
  if(currentCategory !== 'all') items = items.filter(i=>i.category === currentCategory);

  // search
  if(q) items = items.filter(i => i.title.toLowerCase().includes(q) || (i.desc && i.desc.toLowerCase().includes(q)));

  // sort
  if(sortBy === 'price-asc') items.sort((a,b)=>a.price-b.price);
  else if(sortBy === 'price-desc') items.sort((a,b)=>b.price-a.price);
  else if(sortBy === 'name-asc') items.sort((a,b)=>a.title.localeCompare(b.title));
  else if(sortBy === 'name-desc') items.sort((a,b)=>b.title.localeCompare(a.title));
  // recommended default keeps original order

  renderProducts(items);
}

/* ========== PRODUCT MODAL (simple) ========== */
function openProduct(id){
  const p = productsData.find(x=>x.id===id);
  if(!p) return;
  // quick modal using alert-like small popup (we keep simple)
  const info = `${p.title}\n${p.desc}\nPrice: ${formatPrice(p.price)}`;
  alert(info); // simple: can be upgraded to custom modal if mau
}

/* ========== CART FUNCTIONS (saved to localStorage) ========== */
function saveCart(){ localStorage.setItem('mini_cart_final', JSON.stringify(cart)); updateCartUI(); }

function addToCart(id){
  const p = productsData.find(x=>x.id===id); if(!p) return;
  const qtyEl = document.getElementById('qty-inline-'+id);
  const qty = Math.max(1, parseInt(qtyEl?.value || 1));
  const exist = cart.find(i=>i.id===id);
  if(exist){ exist.qty += qty; }
  else cart.push({ id:p.id, title:p.title, price:p.price, qty:qty, image:p.image });
  saveCart();
  showToast(`${p.title} ditambahkan (${qty})`);
}

/* cart UI */
function updateCartUI(){
  const list = document.getElementById('cartItemsList');
  list.innerHTML = '';
  let total = 0;
  cart.forEach(item=>{
    total += item.price * item.qty;
    const node = document.createElement('div');
    node.className = 'cart-item';
    node.innerHTML = `
      <img src="${item.image}" alt="${escapeHtml(item.title)}" />
      <div class="cart-meta">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <strong>${escapeHtml(item.title)}</strong>
          <div class="small">${formatPrice(item.price)}</div>
        </div>
        <div class="cart-controls">
          <input type="number" value="${item.qty}" min="1" class="qty-input" onchange="changeQty(${item.id}, this.value)" />
          <button class="ghost" onclick="removeItem(${item.id})">Remove</button>
        </div>
      </div>
    `;
    list.appendChild(node);
  });
  document.getElementById('cartTotal').textContent = formatPrice(total);
  const count = cart.reduce((s,i)=>s+i.qty,0);
  document.getElementById('cartCountTop').textContent = count;
  document.getElementById('cartCountFloat').textContent = count;
  document.getElementById('cartItemsCount').textContent = count;
  // small accessibility: update top button aria
  document.querySelectorAll('[aria-hidden]').forEach(el=>{});
}

/* cart actions */
function openSideCart(){ document.getElementById('sideCart').classList.add('open'); document.getElementById('sideCart').setAttribute('aria-hidden','false'); updateCartUI(); }
function closeSideCart(){ document.getElementById('sideCart').classList.remove('open'); document.getElementById('sideCart').setAttribute('aria-hidden','true'); }

function changeQty(id,val){
  const q = Math.max(1,parseInt(val)||1);
  const it = cart.find(x=>x.id===id);
  if(it){ it.qty = q; saveCart(); }
}
function removeItem(id){ cart = cart.filter(x=>x.id!==id); saveCart(); showToast('Produk dihapus'); }
function clearCart(){ if(!confirm('Kosongkan keranjang?')) return; cart = []; saveCart(); showToast('Keranjang dikosongkan'); }

function placeOrder(){
  if(cart.length===0){ alert('Keranjang kosong.'); return; }
  // simulate order
  const order = { id:'ORD'+Date.now(), items:cart, total:cart.reduce((s,i)=>s+i.price*i.qty,0), date:new Date().toISOString() };
  // store order history
  const hist = JSON.parse(localStorage.getItem('mini_orders_v1')||'[]'); hist.push(order); localStorage.setItem('mini_orders_v1', JSON.stringify(hist));
  cart = []; saveCart();
  updateCartUI();
  document.getElementById('orderMsg').textContent = `Order sukses! ID ${order.id}`;
  showToast('Order berhasil! ID: '+order.id);
}

/* ========== HELPERS ========== */
function escapeHtml(str){ return String(str||'').replace(/[&<>"']/g, function(m){ return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]; }); }

/* ========== EVENTS ========= */
document.getElementById('searchInput').addEventListener('input', ()=>applyFilters());
document.getElementById('sortSelect').addEventListener('change', ()=>applyFilters());

/* init */
renderCategories();
applyFilters();
updateCartUI();

/* close sidebar when clicking outside on mobile (nice UX) */
document.addEventListener('click', (e)=>{
  const sidebar = document.getElementById('sidebar');
  const burger = document.querySelector('.burger');
  if(sidebar.classList.contains('open') && !sidebar.contains(e.target) && !burger.contains(e.target)){
    sidebar.classList.remove('open');
  }
});

/* Accessibility: close sideCart with Escape */
document.addEventListener('keydown', (e)=>{ if(e.key==='Escape'){ document.getElementById('sidebar').classList.remove('open'); closeSideCart(); } });

</script>
</body>
</html>
